import streamlit as st
from tradingview_ta import TA_Handler, Interval
import time

def get_top_equities():
    top_equities = []
    symbols = ["RBLBANK", "INDUSINDBK", "DIVISLAB", "INDIAMART", "MUTHOOTFIN", "AUROPHARMA", "AXISBANK", "APOLLOTYRE", "BANKBARODA", "TATACHEM", "TECHM", "ASTRON","PETRONET","URAVI","VBL","GODREJPROP","HEALTHY","UMANGDAIRY","MON100","IPL","UNIPARTS","AMEYA","ZFCVINDIA","BAJAJHIND","PROPEQUITY","TIIL","SILVER","HIL","AGSTRA","NAUKRI","DEN","MID150BEES","LEMERITE","BHARATFORG","IFBAGRO","BARBEQUE","AJANTPHARM","ALANKIT","GODFRYPHLP","INDRAMEDCO","TCIEXP","PANSARI","GICHSGFIN","JAIBALAJI","CANBK","ARTNIRMAN","POWERINDIA","OPTIEMUS","MOLDTECH","ICICIBANK","LLOYDS","MITTAL","ZYDUSLIFE","CHENNPETRO","AURDIS","SATINDLTD","NAGREEKEXP","BBTC","KAYA","RAJMET","SWSOLAR","ALICON","IOC","SBIETFIT","PUNJABCHEM","INDNIPPON","RITCO","BLKASHYAP","TEGA","DRCSYSTEMS","TIMESGTY","SELAN","BLUESTARCO","REGENCERAM","DPWIRES","ZUARI","CONTROLPR","KAPSTON", "NIFTY", "BANKNIFTY"]
    # symbols = ["PREMIERPOL","SIDDHIKA","ONMOBILE","NOVARTIND","MANAKSTEEL","SHALPAINTS","JITFINFRA","MOTHERSON","SUPREMEIND","NAHARCAP","LICI","KITEX","ASAL","HARSHA","TANLA","SABEVENTS","SREEL","TIMKEN","NRAIL","VISHNU","HDFCNIFETF","SOMICONVEY","SRIRAM.ST","TIRUPATIFL","UNIINFO","DWARKESH","BGLOBAL","TCIFINANCE","GOLDENTOBC","DYNAMATECH","GENCON","PONNIERODE","DYNAMIC","CENTUM","MSTCLTD","HDFCGROWTH","SCAPDVR","DECCANCE","GALLANTT","ORICONENT","ALKEM","BAJAJCON","TRITURBINE","NMDC","ANANTRAJ","RKDL","OMAXAUTO","AHLEAST","MANINDS","AKSHARCHEM","UPL","IOB","STARPAPER","ACEINTEG","GMBREW","J_KBANK","KBCGLOBAL","PNCINFRA","BHARATGEAR","ANDHRAPAP","HDIL","PIIND","NUCLEUS","VADILALIND","ANTGRAPHIC","SBICARD","VIVIMEDLAB","MEDICAMEQ","TATACOFFEE","UWCSL","AARTIDRUGS","JAYAGROGN","RENUKA","KOHINOOR","NOIDATOLL","JAGSNPHARM","ICIL","ABSLNN50ET","PREMEXPLN","ELGIRUBCO","MAGADSUGAR","IRBINVIT","TVSSRICHAK","CRISIL","BAJAJFINSV","ASIANENE","SBIETFCON","GEECEE","EBBETF0425","UNIENTER","GSCLCEMENT","PPLPHARMA","RML","INDOTECH","BHANDARI","AIROLAM","DIGJAMLMTD","ALLCARGO","RPOWER","TVTODAY","BESTAGRO","FORTIS","BASML","JISLDVREQS","ROSSARI","MHLXMIRU","NIBL","CGCL","SHRADHA","GOYALALUM","ASPINWALL","RBL","GENESYS","NDGL","NTPC","TARAPUR","ACCURACY","20MICRONS","VAKRANGEE","BATAINDIA","DELTACORP","JBMA","RVNL","FDC","HINDPETRO","WORTH","INDOSTAR","KRISHANA","HEROMOTOCO","SANGINITA","CCL","TATAMETALI","LUMAXIND","KUANTUM","PRIMESECU","DELHIVERY","ESCORTS","SIKKO","AARVI","PROZONINTU","MOVALUE","ICICIBANKP","RSYSTEMS","SUTLEJTEX","KEERTI","KANDARP","DUGLOBAL","ICICICOMMO","DONEAR","HARIOMPIPE","GEEKAYWIRE","GANESHHOUC","GANGAFORGE","FACT","BDL","UGARSUGAR","THEJO","BSLNIFTY","SUNTECK","SETFNIF50","VINDHYATEL","ADVANIHOTR","MOL","GPTINFRA","MODIRUBBER","ANUP","JYOTHYLAB","GAYAPROJ","PVR","VISAKAIND","UTINIFTETF","ABMINTLLTD","DLINKINDIA","SUKHJITS","VALIANTORG","FCONSUMER","ROLTA","KPIGREEN","DPABHUSHAN","DIAMONDYD","PPL","NILKAMAL","DIGISPICE","FUSION","MANGLMCEM","APOLLOTYRE","CMNL.ST","BLUEDART","VINNY","MAHICKRA","SUMIT","CSBBANK","RHIM","GLFL","GOKEX","ATLANTA","KESORAMIND","XELPMOC","GOLDSTAR","INDORAMA","WESTLIFE","FELDVR","WELENT","ARCHIDPLY","VEEKAYEM","JOCIL","TCPLPACK","TIL","CALSOFT","DRSDILIP","OBEROIRLTY","VIPULLTD","LICHSGFIN","JHS","SKYGOLD","JAKHARIA","ASALCBR","SHOPERSTOP","PTL","STARCEMENT","LASA","ESABINDIA","ADVENZYMES","DCXINDIA","MEDANTA","ASLIND","GREENPANEL","ORIENTABRA","MORARJEE","KAVVERITEL","ARVEE","PRECISION","EVEREADY","CROWN","SUPREMEENG","JYOTISTRUC","RANEHOLDIN","GODREJIND","PERFECT","VIKASLIFE","SAIL","COFORGE","PARTYCRUS","IPSL","VISHAL","HSCL","AHLUCONT","AMBER","ANSALAPI","KARMAENG","SURANI","BURNPUR","HDFCPVTBAN","MASFIN","COLPAL","VICEROY","HGS","SUPERSPIN","TECHIN","TFCILTD","REPRO","TNPETRO","DENORA","ALOKINDS","CMICABLES","SPENTEX","SPAL","RAMCOIND","COROMANDEL","INDOCO","SETFGOLD","HARDWYN","SOTL","JINDALPOLY","LGBBROSLTD","CAMLINFINE","TIRUMALCHM","METALFORGE","TECHNOE","HINDCOPPER","METROPOLIS","LIQUIDBEES","SARDAEN","GSPL","VAIBHAVGBL","IVP","MSUMI","ELIN","INDIGOPNTS","KOVAI","JINDALSAW","PARACABLES","HDFCNIFIT","JETAIRWAYS","ULTRACEMCO","SCHAEFFLER","IDFNIFTYET","FIVESTAR","RCOM","ANNAPURNA","CENTURYPLY","KAKATCEM","KABRAEXTRU","SSINFRA.ST","ICICI10GS","3PLAND","GRCL.ST","MBLINFRA","LIKHITHA","V2RETAIL","MAYURUNIQ","SUMICHEM","KAMDHENU","QUICKHEAL","UNICHEMLAB","MUNJALSHOW","GLENMARK","RITES","SANDESH","SANGHIIND","EMIL","JBCHEPHARM","ALLETEC","HARRMALAYA","BANKBEES","KRISHNADEF","PRAENG","INNOVATIVE.ST","JMFINANCIL","NATNLSTEEL","SHREEPUSHK","JETKNIT","MOIL","BAJFINANCE","NPBET","AKSHAR","FEDERALBNK","SPARC","BHAGYANGR","HCC","CONSUMBEES","BAJAJELEC","BGRENERGY","BSLGOLDETF","STEL","AARVEEDEN","TCS","RELAXO","ISMTLTD","AAREYDRUGS","RPPL","ICICIAUTO","REPCOHOME","VOLTAMP","SEYAIND","CYBERMEDIA","REXPIPES","KRITINUT","ZENITHSTL","GOACARBON","GILLANDERS","MADHAVBAUG","MARALOVER","KIRLOSIND","GRMOVER","LYKALABS","ALKYLAMINE","CASTROLIND","PODDARHOUS","CAPLIPOINT","PCBL","FSL","TRACXN","MOHEALTH","TERASOFT","SHAILY","MCX","HDFC","BANSWRAS","SONACOMS","MENONBE","TEMBO","KEEPLEARN","RELCAPITAL","HOVS","NELCO","SUNPHARMA","BANKBARODA","BPCL","JSL","ICICICONSU","THERMAX","INDUSINDBK","MTEDUCARE","GIPCL","RUCHINFRA","ACE","ASHIMASYN","SETF10GILT","LATENTVIEW","ORIENTALTL","GILT5YBEES","KOTAKBKETF","SUBEXLTD","SHRIPISTON","SSWL","UNIVPHOTO","PLASTIBLEN","INDIAGLYCO","BVCL","ORIENTCEM","TARC","63MOONS","VTL","CGPOWER","MEGASOFT","PGHH","ICICIGI","BEWLTD","TTKHLTCARE","MARKSANS","UNIONBANK","COFFEEDAY","KRISHIVAL","PREMIER","GKWLIMITED","CINELINE","PTC","ICICINF100","METROBRAND","KSB","ASTRAZEN","HDFCQUAL","APTUS","CLEAN","NBCC","PRUDENT","PNC","KHFM","BALRAMCHIN","SANGAMIND","TRIGYN","IBREALEST","NAGAFERT","AGRITECH","HNGSNGBEES","AKASH","QNIFTY","AXISCADES","BSE","GROBTEA","DRREDDY","FOODSIN","CORALFINAC","LANCER","THEMISMED","GODREJCP","HAVISHA","GAEL","RATNAMANI","IONEXCHANG","CENTEXT","DHUNINV","SOFTTECH","CAMS","AARON","AJRINFRA","PRITI","ABCOTS","A2ZINFRA","GRETEX","DSPQ50ETF","NILASPACES","MCDOWELL_N","TEXMOPIPES","AMBIKCO","BANKINDIA","SHALBY","INVENTURE","RECLTD","GANGESSECU","JKCEMENT","SHREDIGCEM","WILLAMAGOR","SILINV","SANSERA","TIPSFILMS","GRWRHITECH","CSLFINANCE","IOLCP","REFEX","KAMOPAINTS","RSSOFTWARE","SDBL","TALBROAUTO","OFSS","BORORENEW","GLOBE","UTINEXT50","AMDIND","FOCUS","GRAVITA","IDBI","DTIL","LIQUIDETF","SIRCA","MFSL","KCP","GRAUWEIL","TEJASNET","TCNSBRANDS","EUROBOND","IMPEXFERRO","STARHEALTH","DCM","AWHCL","SUPERHOUSE","VOLTAS","NIF100BEES","POLYMED","BBTCL","SHREERAMA","BERGEPAINT","LAMBODHARA","KOPRAN","AIAENG","NECLIFE","SERVOTECH","ATUL","JKPAPER","CHEMCON","SALZERELEC","GATI","HPAL","PILANIINVS","INDSWFTLTD","BEPL","BROOKS","UBL","ALMONDZ","GIRIRAJ","TRIL","KARURVYSYA","CORDSCABLE","TRENT","SREINFRA","TORNTPHARM","MAHEPC","DBOL","MOGSEC","BLUECHIP","BIRET.RR","VIDHIING","IMAGICAA","SHRIRAMPPS","GREENPLY","MAHINDCIE","IRIS","PEARLPOLY","IIFLSEC","TRU","IBMFNIFTY","GMDCLTD","CENTRUM","NATHBIOGEN","NUVOCO","PRECWIRE","OSWALSEEDS","SETFNN50","KOKUYOCMLN","EXCEL","JASH","EASEMYTRIP","TFL","ADSL","CAREERP","BIOFILCHEM","MAFSETF","HMT","IRB","XPROINDIA","POLYPLEX","DKEGL","BSLSENETFG","FAZE3Q","SVLL","AILIMITED","GSTL","IZMO","HCG","SECL","DALBHARAT","SATIA","WSTCSTPAPR","HDFCSILVER","FINEORG","HBSL","IDEA","JAYSREETEA","5PAISA","AHLADA","BANDHANBNK","NRL","TORNTPOWER","VISASTEEL","INTELLECT","GLOBAL","SADBHIN","VIJAYA","EDUCOMP","HOMESFY","DNAMEDIA","HDFCLIFE","CMRSL","CUPID","MOREPENLAB","NESCO","HGINFRA","KIMS","CENTURYTEX","EMAMIREAL","AMIABLE","NELCAST","PAGEIND","SUDARSCHEM","UJJIVANSFB","HAVELLS","3RDROCK","CUB","KFINTECH","ORTEL","ARHAM","JMA","SARLAPOLY","BRITANNIA","SHYAMCENT","KNAGRI","KIRLOSENG","INFOMEDIA","GRASIM","TAJGVK","LXCHEM","WEBELSOLAR","BSOFT","TWL","NLCINDIA","NIACL","AISL","RUCHIRA","JINDWORLD","WALPAR","RAJRATAN","ALKALI","MARUTI","ICICIINFRA","ABINFRA","DSSL","SECURKLOUD","RCF","DOLLAR","BSHSL","SMCGLOBAL","SGL","BODALCHEM","PAISALO","RGL","REPL","ERIS","GUJALKALI","PARAGMILK","TVSMOTOR","RMDRIP","ADANITRANS","UTISENSETF","TTL","INDIGO","EQUITASBNK","SWASTIK","ROML","ASAHIINDIA","IMFA","PANACHE","INFRABEES","INGERRAND","SCHNEIDER","ASIANPAINT","SONATSOFTW","SIL","SHANTI","MTNL","BOROLTD","MBAPL","IITL","IBULHSGFIN.N0","SMSLIFE","TNIDETF","HUBTOWN","MGL","PGINVIT","MAN50ETF","ICICISENSX","ELDEHSG","STEELXIND","ZOMATO","CARBORUNIV","SIGIND","BETA","NITCO","NETF","WANBURY","SPORTKING","MHHL","KEYFINSERV","TIINDIA","CIPLA","ISEC","KOTAKPSUBK","CEREBRAINT","TBZ","BAJAJHLDNG","MINDTECK","ZODIACLOTH","MAHLIFE","SETUINFRA","CDSL","NAM_INDIA","GMMPFAUDLR","KOTAKSILVE","GUJRAFFIA","AMBICAAGAR","RALLIS","SPCENET","MAWANASUG","CPSEETF","LALPATHLAB","ICICIFMCG","SANCO","RSWM","IWEL","DYNPRO","RAMCOCEM","BALPHARMA","ICICIM150","APOLLOPIPE","DAMODARIND","HITECH","GUJAPOLLO","ASIANHOTNR","PENINLAND","BBOX","CMNL","RUSHIL","RTNPOWER","NITINSPIN","HDFCMOMENT","INDOBORAX","SCHAND","AGARIND","ADANIENT","DALMIASUG","MIRCELECTR","VAISHALI","JUBLFOOD","CLNINDIA","CCCL","LTIM","PRITIKA","NACLIND","CLEDUCATE","UJAAS","TAINWALCHM","INDTERRAIN","DSPBANKETF","ARSSINFRA","KAYNES","DHARMAJ","21STCENMGM","POLYCAB","JUBLINGREA","INDOAMIN","ICICINV20","BEL","ORIENTBELL","THYROCARE","EMUDHRA","ACC","GOKULAGRO","SOUTHBANK","RICHA","AXISBANK","DESTINY","CHALET","ELECTHERM","PSB","APTECHT","MOMENTUM","STYLAMIND","KAJARIACER","SUNFLAG","TATAMTRDVR","SETFNIFBK","COSMOFIRST","RELIGARE","MAESGETF","EMBASSY.RR","BAJAJ_AUTO","GNA","VSCL","IL_FSTRANS","SALASAR","KHADIM","MINDACORP","DCW","HNDFDS","VARDMNPOLY","MACPOWER","BCP","MUTHOOTFIN","POWERMECH","BIKAJI","ECLERX","ABB","NGLFINE","UNITECH","ANURAS","MAXIND","HEG","SOLARINDS","VARDHACRLC","NH","KRITIKA","SUNDRMBRAK","PIXTRANS","GLOBUSSPR","ISFT","SKP","WEALTH","SONUINFRA","MAHSCOOTER","BALAJITELE","DIXON","SONAMCLOCK","OIL","CHOLAFIN","DFMFOODS","SILVERBEES","CHEMPLASTS","MODISONLTD","IFBIND","LUPIN","SAKUMA","ONELIFECAP","VESUVIUS","VINYLINDIA","ROUTE","AETHER","AJMERA","CREATIVEYE","DUCON","MHRIL","LAXMICOT","AXISCETF","KDDL","DCAL","MOLDTKPAC","SPLPETRO","DELTAMAGNT","SHEMAROO","VENUSREM","ALLSEC","LTTS","ARTEMISMED","ELECON","MWL","NAHARSPING","NEWGEN","MARSHALL","ESSARSHPNG","HINDALCO","MAPMYINDIA","INDIAMART","DOLATALGO","HEMIPROP","IRCON","CHOLAHLDNG","XCHANGING","CREST","ALPA","CADSYS","SHUBHLAXMI","LAKPRE","BLBLIMITED","APARINDS","GRANULES","HINDMOTORS","SPENCERS","MOM50","DUCOL","SHARIABEES","PFOCUS","NORBTEAEXP","INOXWIND","EIHOTEL","PRIVISCL","SALSTEEL","NRBBEARING","VSSL","TFLPP.E1","STEELCAS","KHAITANLTD","OMKARCHEM","MUKANDLTD","TATAMOTORS","AARTISURF","TOUCHWOOD","CAPTRUST","KOTYARK","NOCIL","KALYANKJIL","INDHOTEL","ADFFOODS","SPRL","IGL","DCI","LINDEINDIA","NIRAJ","FINCABLES","EMMBI","SIMPLEXINF","RELINFRA","VSTTILLERS","HAL","PAYTM","DHANBANK","IRISDOREME","VIKASPROP","MONQ50","BHARATWIRE","KSOLVES","SURYALAXMI","VIMTALABS","PHARMABEES","BCONCEPTS","GSFC","NCC","UMA","ZYDUSWELL","BLS","SUNTV","MURUDCERA","EMKAY","JKIL","SEAMECLTD","CANFINHOME","JPPOWER","BBETF0432","KICL","BBL","TATVA","ARIHANTACA","AKSHOPTFBR","YAARI","SGIL","ATULAUTO","ANLON","ROTO","FRETAIL","SABTN","M_MFIN","MADHAV","GOKUL","VINATIORGA","PRESTIGE","RICOAUTO","EXIDEIND","INSPIRISYS","HERCULES","ROHLTD","LUMAXTECH","ICEMAKE","RATEGAIN","ADORWELD","GANGOTRI","DCMSHRIRAM","LEXUS","M_M","BPL","DICIND","HUHTAMAKI","SILGO","CONTI","RUBYMILLS","AAATECH","ASTEC","CYBERTECH","UNIVCABLES","HDFCNIF100","ONEPOINT","UNIVAFOODS","DJML","SPLIL","SILVERTUC","SDL26BEES","APLAPOLLO","ISHAN","GOENKA","VISESHINFO","LINCOLN","MASKINVEST","SAKAR","JSWHL","ARIES","GRINDWELL","KILITCH","KRIDHANINF","EQUIPPP","SBIETFQLTY","RAJSREESUG","INOXGREEN","NEULANDLAB","EROSMEDIA","SPTL","MARATHON","DSPSILVETF","BAFNAPH","L_TFH","EBBETF0430","LSIL","TAKE","IMPAL","TVSELECT","JKTYRE","SBIETFPB","MOKSH","IEX","FMNL","NAZARA","SHREYAS","AMJLAND","MANOMAY","DANGEE","MAANALU","JKLAKSHMI","HDFCBANK","MMP","RHFL","VMARCIND","UDAICEMENT","SAREGAMA","ELGIEQUIP","QUINTEGRA","MANAKSIA","PDMJEPAPER","VIJIFIN","MKPL","VIVO","AURIONPRO","SESHAPAPER","CERA","ASHAPURMIN","VIKASWSP","NPST","ICICIMCAP","GRINFRA","SUNDARMHLD","SOLEX","ESSENTIA","URJA","GICRE","DVL","INDIANB","JSLHISAR","DATAMATICS","INOXLEISUR","ZENTEC","DCMNVL","DBREALTY","STOVEKRAFT","BFINVEST","BASF","SPYL","MUKTAARTS","BOHRAIND","WELINV","IGPL","ABFRL","LATTEYS","GULFOILLUB","BTML","OMFURN","PULZ","SFL","INSECTICID","MALUPAPER","KOTAKMNC","SHK","BIRLATYRE","MTARTECH","SKMEGGPROD","PRAKASHSTL","SUMEETINDS","GALAXYSURF","JPINFRATEC","HPIL","MAHESHWARI","TCI","HINDCOMPOS","SRPL","DPSCLTD","ITDC","GANDHITUBE","KPITTECH","GILLETTE","HINDWAREAP","HDFCMFGETF","KIRLOSBROS","PANACEABIO","PRICOLLTD","ROLEXRINGS","SCI","SHARDACROP","ZEEL","ZUARIIND","SHAREINDIA","SHAHALLOYS","TECH","ASCOM","SHREYANIND","ICICINXT50","RAIN","MOMOMENTUM","TATACONSUM","SBC","LEMONTREE","MANORG","ASAHISONG","JSLL","BAJAJHCARE","BEDMUTHA","IIFL","WEWIN","INFOBEAN","ASHOKA","GARFIBRES","DEEPAKFERT","SBIN","MEGASTAR","DGCONTENT","FILATEX","QUESS","KANORICHEM","BIRLAMONEY","ITI","FIDEL","AXISGOLD","IBULHSGFIN","VARROC","NATCOPHARM","QMSMEDI","TMB","DISHTV","PPAP","TIMESCAN","LOYALTEX","ARENTERP","MCL","KENNAMET","DODLA","GOLDBEES","DREDGECORP","WIPRO","DIL","GOLDTECH","DABUR","VASWANI","SABAR","PATINTLOG","HBANKETF","RAMKY","RAINBOW","GOCLCORP","KOTAKCONS","SURYAROSNI","EASTSILK","PARSVNATH","UTIAMC","PITTIENG","LANDMARK","VASCONEQ","JINDRILL","NSIL","RADIANTCMS","GTPL","DUCOL.ST","NIDAN","SBCL","JAYBARMARU","PRITIKAUTO","AXISHCETF","BANG","MOTOGENFIN","KSL","S_SPOWER","WABAG","GOLDIAM","PHOENIXLTD","CONCOR","MGEL","WHEELS","DELPHIFX","CYIENT","SWANENERGY","ESTER","BIL","ATFL","CARTRADE","TEAMLEASE","ICICILOVOL","PFC","GREENLAM","SHRENIK","NHPC","RILINFRA","UCOBANK","DHRUV","RAMRAT","PRINCEPIPE","AGI","HBLPOWER","AVTNPL","VLSFINANCE","DSPN50ETF","KREBSBIO","SUBROS","GREENPOWER","JAYNECOIND","BRIGHT","MCLEODRUSS","TTKPRESTIG","IVZINNIFTY","MADRASFERT","MANXT50","PNBHOUSING","GULPOLY","PIDILITIND","TATAELXSI","CAMPUS","SIYSIL","PALASHSECU","NECCLTD","DSPNEWETF","VERA","NDTV","NEXTMEDIA","THANGAMAYL","APLLTD","SILLYMONKS","RANASUG","ALEMBICLTD","IVC","TATACOMM","JFLLIFE","POLICYBZR","NAGREEKCAP","GRAPHITE","GINNIFILA","OSIAHYPER","RESPONIND","ARVINDFASN","GNFC","BALKRISIND","RANEENGINE","AROGRANITE","BANCOINDIA","MRPL","AXITA","TIJARIA","VIVIANA","RELIANCE","RAJVIR","WHIRLPOOL","SUNDRMFAST","SUPRIYA","JUSTDIAL","GTLINFRA","SAPPHIRE","SYRMA","AURUMPP.E1","AUTOAXLES","SUVEN","LAOPALA","PIONEEREMB","GFLLIMITED","SAGARDEEP","MERCATOR","GENUSPOWER","MOXSH","KEI","FCSSOFT","SEPC","ICICISILVE","INDUSTOWER","JTLIND","APOLLOHOSP","3MINDIA","PRAJIND","AMIORG","ZODIAC","CELEBRITY","MOHITIND","LICNETFSEN","MONTECARLO","DCMSRIND","ICICITECH","TRF","SAKHTISUG","SIGACHI","DBSTOCKBRO","TATAPOWER","SEJALLTD","GFSTEELS","CTE","EIDPARRY","IDFCFIRSTB","ABSLBANETF","KOTAKBANK","BANARBEADS","COASTCORP","FCL","HEADSUP","VGUARD","TREEHOUSE","UNOMINDA","BEML","AGNI","BHARTIARTL","CLSEL","UFO","SIGMA","CHEMFAB","JAMNAAUTO","POWERGRID","FINOPB","ICICIB22","JAGRAN","KORE","HEXATRADEX","WATERBASE","BHEL","AWL","HERANBA","USASEEDS","AHIMSA","KCPSUGIND","SASKEN","EDELWEISS","ARVSMART","GUFICBIO","BSL","ICICI5GSEC","KIRLFER","PSUBNKBEES","KOTAKMID50","ITC","SOMATEX","KIOCL","HITECHGEAR","PURVA","CENTENKA","ARVIND","INDBANK","HATSUN","VHL","CARYSIL","EMAMIPAP","AYMSYNTEX","DHANI","BKMINDST","FLEXITUFF","SATHAISPAT","PILITA","KTKBANK","GTL","SOBHA","CINEVISTA","MELSTAR","SPECIALITY","JUBLPHARMA","SIS","BOMDYEING","AUSOMENT","KIRIINDUS","IRCTC","LT","DATAPATTNS","NFL","MONARCH","VASA","SANGHVIMOV","KOTHARIPET","NAVINFLUOR","SAH","UTTAMSUGAR","TRIDENT","MAZDA","HERITGFOOD","ORIENTHOT","SKIPPER","HDFCLOWVOL","ONWARDTEC","SHIGAN","AHL","MFL","UNITEDTEA","TEXRAIL","SUNDARMFIN","NAVNETEDUL","MRO_TEK","SNOWMAN","MANYAVAR","SHAKTIPUMP","BOSCHLTD","VERANDA","ICICIFIN","KMSUGAR","MSPL","SAGCEM","MMFL","BHAGCHEM","TNPL","RKFORGE","VETO","AARTIPHARM","APCOTEXIND","JBFIND","EXXARO","MANUGRAPH","TATASTEEL","CREDITACC","MOQUALITY","ACCELYA","IVZINGOLD","VITAL","KALYANIFRG","HOMEFIRST","HDFCAMC","GEPIL","KAUSHALYA","MEP","ENIL","GOCOLORS","SRHHYPOLTD","UNIDT","ADL","INFY","BYKE","CHAMBLFERT","NAHARPOLY","CENTRALBK","IEL","SYNGENE","ICRA","AMBANIORG","SULA","HILTON","SUZLON","AXISNIFTY","ALPSINDUS","AVROIND","EBBETF0423","LIBERTSHOE","VIPIND","ADANIPOWER","AAVAS","3IINFOLTD","PENIND","GMRP_UI","HESTERBIO","KOTAKNIFTY","RUSTOMJEE","BAIDFIN","SPIC","LGBFORGE","MAXHEALTH","SHIVAMILLS","LOTUSEYE","SELMC","RADAAN","ICICILIQ","TOTAL","HDFCVALUE","WEIZMANIND","JAICORPLTD","MOTILALOFS","CONSOFINVT","JUBLINDS","SKIL","CRAFTSMAN","DRL","ZENSARTECH","PERSISTENT","ARCHIES","KRBL","SADBHAV","AMRUTANJAN","SATIN","KANSAINER","SJS","EBANK","MEGAFLEX","GODREJAGRO","SHREECEM","JSWISPL","ROLLT","BFUTILITIE","ENDURANCE","DLF","SWELECTES","SUULD","DEEPAKNTR","AXISBNKETF","BECTORFOOD","NBIFIN","AUTOBEES","EQUITAS","BALAMINES","PALREDTEC","DHANUKA","DCBBANK","FINPIPE","SMSPHARMA","GOODYEAR","MINDSPACE.RR","MIRZAINT","VENKEYS","PARADEEP","LAXMIMACH","TARACHAND","TECHM","ASIANTILES","STYRENIX","MEDPLUS","MMTC","CESC","KEC","LIBAS","NIPPOBATRY","TIMETECHNO","DMCC","ICICIPRULI","KERNEX","MARICO","GRPLTD","TREJHARA","UGROCAP","ZEELEARN","SOLARA","MAHLOG","LPDC","TATACHEM","NXTDIGITAL","KINGFA","INNOVANA","INTENTECH","GOLDSHARE","ZEEMEDIA","CHEVIOT","ENGINERSIN","ICICIGOLD","SHANTIGEAR","NETWORK18","YESBANK","DEEPINDS","INDIANCARD","INDIANHUME","JTEKTINDIA","SPICEJET","KOTAKALPHA","MASPTOP50","HIMATSEIDE","EBBETF0431","SANOFI","MANAPPURAM","SPANDANA","NILAINFRA","MPSLTD","HAPPSTMNDS","OSWALAGRO","IL_FSENGG","MOHOTAIND","SAFARI","STAMPEDE","NEOGEN","TI","ARSHIYA","VMART","MANGALAM","SHIVALIK","UNIVASTU","EKC","ANIKINDS","AIRTELPP.E1","VIPCLOTHNG","PANAMAPET","SPECTRUM","CARERATING","AUTOIND","ONGC","ANGELONE","NDRAUTO","WINDMACHIN","SAKSOFT","WALCHANNAG","ANDREWYU","MRF","SHILPAMED","SINTERCOM","STCINDIA","TDPOWERSYS","JISLJALEQS","CMSINFO","KOTHARIPRO","HEIDELBERG","FORCEMOT","YUKEN","GESHIP","GMRINFRA","RBMINFRA","UCL","ABBOTINDIA","IRFC","SHIVATEX","MANINFRA","HFCL","EIHAHOTELS","RAILTEL","MUNJALAU","RAMCOSYS","COALINDIA","SHARDAMOTR","VISHWARAJ","GLS","UMAEXPORTS","STEELCITY","WINPRO","NGIL","MATRIMONY","ICDSLTD","MAFANG","TIPSINDLTD","GREAVESCOT","KELLTONTEC","BANKA","SURANAT_P","PCJEWELLER","KPRMILL","COMPUSOFT","INDOTHAI","KOTAKNV20","TITAN","AVG","SEQUENT","AMARAJABAT","BMETRICS","ASTERDM","MAZDOCK","AJOONI","BIGBLOC","VRLLOG","CUMMINSIND","DBL","BUTTERFLY","ELECTCAST","UNITEDPOLY","UTIBANKETF","ITDCEM","ACCORD","HIKAL","SWARAJ","HINDCON","PFIZER","TAPIFRUIT","NV20BEES","MBECL","VEDL","JPOLYINVST","GLAND","DREAMFOLKS","THOMASCOOK","TOKYOPLAST","KOLTEPATIL","SUNCLAYLTD","JINDALSTEL","EXCELINDUS","NIFTYQLITY","SINTEX","INDIACEM","IFGLEXPOR","ITBEES","AVONMORE","NATIONALUM","GENUSPAPER","JUNIORBEES","RVHL","ORIENTELEC","CIGNITITEC","APOLLO","WOCKPHARMA","HDFCNEXT50","ORCHPHARMA","HLVLTD","SDL24BEES","SUVIDHAA","GABRIEL","SUNDARAM","EVERESTIND","OAL","MAITHANALL","ARROWGREEN","DEEPENR","PEL","PGEL","SHRIRAMFIN","CONFIPET","BCLIND","PODDARMENT","STAR","CHEMBOND","SHYAMMETL","MPTODAY","SHYAMTEL","TANTIACONS","GHCL","BCG","COOLCAPS","GOODLUCK","MADHUCON","ARMANFIN","CUBEXTUB","TV18BRDCST","ORBTEXP","DEVIT","GUJGASLTD","ORIENTPPR","CHOICEIN","PIGL","MAHKTECH","UMESLTD","PASHUPATI","INTLCONV","SMARTLINK","RAMANEWS","SJVN","LINC","DBCORP","GULFPETRO","WIPL","IPCALAB","ASHOKLEY","NCLIND","ICICINIFTY","SUVENPHAR","CANTABIL","ETHOSLTD","DCMFINSERV","ASHIANA","KOTAKLIQ","RAJESHEXPO","KANANIIND","SIEMENS","SURYODAY","TPLPLASTEH","LAGNAM","PKTEA","AARTISURF.P1","SCPL","SUZLONPP.E1","RADHIKAJWE","RPPINFRA","CCHHL","OMINFRAL","DHARSUGAR","ZENITHEXPO","AVADHSUGAR","NAHARINDUS","JETFREIGHT","AFFLE","OMAXE","BALMLAWRIE","GPIL","HONDAPOWER","AEGISCHEM","PRECOT","ISGEC","SMLISUZU","THEINVEST","SPMLINFRA","DYCL","TARMAT","ICICI500","REVATHI","KRSNAA","POKARNA","UJJIVAN","PRAXIS","MAHABANK","KOTAKLOVOL","VSTIND","AIRAN","ADROITINFO","AUBANK","SBILIFE","ABSLAMC","RAMAPHO","JALAN","JCHAC","BHARATRAS","HIRECT","PHANTOMFX","PRECAM","JINDALPHOT","PNB","SAMBHAAV","PVP","BIRLACORPN","BLISSGVS","HCL_INSYS","KSCL","HDFCSENETF","PASUPTAC","LICNFNHGP","SOMANYCERA","SYNCOMF","MEDICO","AUROPHARMA","HONAUT","VIKASECO","SANWARIA","GVKPIL","GET_D","SALONA","CMMIPL.ST","REDINGTON","SASTASUNDR","COCHINSHIP","JPASSOCIAT","ORISSAMINE"]  

    for symbol in symbols:
        handler = TA_Handler(
            symbol=symbol,
            screener="india",
            exchange="NSE",
            interval=Interval.INTERVAL_15_MINUTES
        )
        analysis = handler.get_analysis()
        if analysis.summary['RECOMMENDATION'] == 'STRONG_BUY':
            top_equities.append((symbol, analysis.summary['RECOMMENDATION']))

    return top_equities

st.title('Top Equities to Buy')

def update_equities():
    st.write("Fetching top equities...")
    top_equities = get_top_equities()
    st.write(f"{time.strftime('%H:%M:%S', time.localtime())} in 15 Minutes")
    if top_equities:
        st.write("Here are the top equities to buy:")
        for idx, (symbol, recommendation) in enumerate(top_equities):
            st.write(f"{idx + 1}. {symbol} - {recommendation}")
    else:
        st.write("Don't buy anything at the moment.")

update_equities()  # Initial update

# Infinite loop to update every two and a half minutes
while True:
    
    time.sleep(150)
    update_equities()
